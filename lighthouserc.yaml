# This is the configration file for https://github.com/GoogleChrome/lighthouse-ci

ci:
  collect:
    staticDistDir: ./packages/web/dist
  upload:
    target: temporary-public-storage
  assert:
    preset: "lighthouse:recommended"
    assertions:
      # lodash@4.17.15 has some unfix vulnerabilities. Check https://github.com/lodash/lodash/issues/4738 for more information.
      no-vulnerable-libraries: "warn"

      # Currently there are 8 javascript bundle files who has a large part of unused code. Firebase contributes most part of them.
      # Check this link for the method to get all unused javascript code: https://web.dev/remove-unused-code/
      # Check this link to follow the progress of tree-shakeable Firebase library: https://github.com/firebase/firebase-js-sdk/issues/2241
      unused-javascript: ["error", { maxLength: 8 }]
